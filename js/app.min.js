$(document).ready(function() {
  $(".header-bottom__searc-svg").click(function() {
      $(".header-search").toggleClass("active");
  });
});

$(document).ready(function() {
  $(".calculate-type").click(function() {
      $(".calculate__top__column__select").toggleClass("active");
  });
});

$(document).ready(function() {
  $(".header-bottom__search__mobile").click(function() {
    $(".header__adaptiv, body, .header-top, .header-bottom, .header-bottom__logo-a, .header-bottom__logo-a-blue, .header-bottom__burger__close, .header-bottom__burger").removeClass("active-burger");
  });
});


$(document).ready(function() {
  $(".left-menu-main-link-svg").click(function(e) {
      var $parent = $(this).closest(".left-menu-main-link");
      $parent.find(".left-menu-main-link__ul, .left-menu-main-link-svg").toggleClass("active");
  });
});





$(document).ready(function() {
  $(".header-bottom__burger, .header-bottom__burger__close").click(function() {
      $(".header__adaptiv, body, .header-top, .header-bottom, .header-bottom__logo-a, .header-bottom__logo-a-blue, .header-bottom__burger__close, .header-bottom__burger").toggleClass("active-burger");
  });
});

var mq = window.matchMedia( "(max-width: 767px)" );
if (mq.matches) {
  var elements = document.querySelectorAll("#icon-page-region-adaptiv");

  elements.forEach(function(element) {
      element.setAttribute("width", "40px");
      element.setAttribute("height", "40px");
  });
}

function select() {
  var select = document.querySelector('.calculate__top__column__select');

  document.body.onclick = function(evt) {
      if (!select.contains(evt.target) && !select.contains(evt.target)) {
          select.classList.remove('active');
      }
  }
}




const myModal = new HystModal({
  linkAttributeName: "data-hystmodal",
  // настройки (не обязательно), см. API
});

let phoneMaskEl = document.getElementById('phone-mask');
if (phoneMaskEl) {
  phoneMask() 
}

function phoneMask() {
  const maskOptions = {
      mask: '+{7} (000) 000 00 00'
  };
  const mask = IMask(phoneMaskEl, maskOptions);
}



let dateMaskEl = document.getElementById('date-mask');
if (dateMaskEl) {
  dateMask() 
}

function dateMask() {
  const maskOptions = {
      mask: '00.00.0000'
  };
  const mask = IMask(dateMaskEl, maskOptions);
}




let moneyMaskEl = document.getElementById('money-mask');
if (moneyMaskEl) {
  moneyMask() 
}

function moneyMask() {
  const maskOptions = [
    { mask: '' },
    {
      mask: 'num ₽',
      lazy: false,
      blocks: {
        num: {
          mask: Number,
          thousandsSeparator: ' '
        },
      },
    },
  ]
  const mask = IMask(moneyMaskEl, maskOptions);
}



let litrMaskEl = document.getElementById('litr-mask');
if (litrMaskEl) {
  litrMas() 
}

function litrMas() {
  const maskOptions = [
    { mask: '' },
    {
      mask: 'num т',
      lazy: false,
      blocks: {
        num: {
          mask: Number,
          thousandsSeparator: ' '
        },
      },
    },
  ]
  const mask = IMask(litrMaskEl, maskOptions);
}
  
const selectCalculatePage = () => {
  const elements = document.querySelectorAll('.form-calculate-gbo__item-select');
  elements.forEach(el => {
    const choices = new Choices(el, {
      searchEnabled: false,
      itemSelectText: '',
      noResultsText: 'Ничего не найдено',
      loadingText: 'Загрузка...',
    });
  });
}

selectCalculatePage();

const selectMultiple = () => {
  const elements = document.querySelectorAll('.form-calculate-gbo__item-select-erghwgw');
  elements.forEach(el => {
    const choices = new Choices(el, {
      delimiter: ',',
      searchEnabled: false,
      itemSelectText: '',
      noResultsText: 'Ничего не найдено',
      delimiter: ',',
      loadingText: 'Загрузка...',
      noChoicesText: 'Больше выбора нету'
    });
  });
}

selectMultiple();



const myDiv = document.querySelector(".ip");
const radioButtons = document.querySelectorAll('input[name="select-type"]');

radioButtons.forEach((radio) => {
  radio.addEventListener("change", () => {
    myDiv.className = "";

    if (radio.checked) {
      myDiv.classList.add(radio.value);
    }
  });
});




let btnResultGbo = document.querySelector('#btn-result-gbo');

if (btnResultGbo) {
  formulaGbo()
  btnResultGbo.addEventListener('click', formulaGbo);
}

function formulaGbo() {
  let metanEl = document.querySelector('#metan');
  let priceDowloundEl = document.querySelector('#price-dowlound');
  let probegEl = document.querySelector('#probeg');
  let priceFuelEl = document.querySelector('#price-fuel');
  let raschodEl = document.querySelector('#raschod');

  let metanValue = Number(metanEl.value)
  let priceDowloundValue = Number(priceDowloundEl.value)
  let probegValue = Number(probegEl.value)
  let riceFuelValue = Number(priceFuelEl.value)
  let raschodValue = Number(raschodEl.value)

  let result = metanValue + priceDowloundValue + probegValue + riceFuelValue + raschodValue;
  let monthGboEl = document.querySelector('#month-gbo');
  let economMonthEl = document.querySelector('#econom-month');
  let economYearEl = document.querySelector('#econom-year');
  monthGboEl.innerHTML = result + " месяца";
  economMonthEl.innerHTML = result + " рублей";
  economYearEl.innerHTML = result + " рублей";
}



$(document).ready(function() {
  $("#btn-result-gbo").click(function() {
      $(".calculate-button, .calculate__bottom").removeClass("none");
  });
});